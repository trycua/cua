---
title: Building Lumier
description: Build Lumier from source or customize the container
---

Build Lumier from source to customize packages, hooks, or configuration.

## Build from source

```bash
# Clone the repo (if you haven't)
git clone https://github.com/trycua/cua.git
cd cua/libs/lumier

# Build
docker build -t lumier-custom:latest .

# Run your build
docker run -it --rm \
  -p 8006:8006 \
  -e VM_NAME=my-vm \
  -e VERSION=ghcr.io/trycua/macos-sequoia-cua:latest \
  -e CPU_CORES=4 \
  -e RAM_SIZE=8192 \
  lumier-custom:latest
```

## Customization points

| Location                   | What to customize                    |
| -------------------------- | ------------------------------------ |
| `Dockerfile`               | Base image, installed packages       |
| `/run/hooks/`              | Scripts that run during VM lifecycle |
| `/run/config/constants.sh` | Default settings                     |

### Change the base image

The default is Debian Bullseye Slim. To use a different base, edit the first line of `Dockerfile`:

```dockerfile
FROM debian:bookworm-slim
```

### Add packages

Add to the `apt-get install` list in the Dockerfile:

```dockerfile
RUN apt-get update && apt-get install -y \
  your-package-here \
  ...
```

### Add lifecycle hooks

Scripts in `/run/hooks/` run at specific points. Create your own to customize behavior.

## Publish your build

Push to Docker Hub or another registry:

```bash
# Tag for your registry
docker build -t yourusername/lumier:custom .

# Login and push
docker login
docker push yourusername/lumier:custom
```

Then use your image:

```bash
docker run -it --rm \
  -p 8006:8006 \
  -e VM_NAME=my-vm \
  -e VERSION=ghcr.io/trycua/macos-sequoia-cua:latest \
  yourusername/lumier:custom
```
