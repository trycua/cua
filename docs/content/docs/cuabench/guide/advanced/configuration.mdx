---
title: Configuration
description: Configure cua-bench with config files and environment variables
---

# Configuration

Configure cua-bench behavior with `.cua/` config files and environment variables.

## Config Files

| File | Description |
|------|-------------|
| `.cua/config.yaml` | Default execution settings |
| `.cua/secrets.yaml` | Secret references for API keys |
| `.cua/agents.yaml` | Agent definitions |

## config.yaml

Default execution settings for `cb run`:

```yaml
# Where to run: "local" or "cloud"
on: local

# Parallel execution
max_parallel: 16
timeout: 600

# Default images by platform
defaults:
  images:
    linux-docker: linux-docker
    linux-qemu: linux-qemu
    windows-qemu: windows-waa
    android-qemu: android-qemu
    macos-lume: macos-lume

  resources:
    linux-docker:
      memory: 4G
      cpus: 2
    windows-qemu:
      memory: 8G
      cpus: 4

# Default agent image
default_image: trycua/cua-bench:latest
```

## secrets.yaml

Reference API keys securely (values stored in environment variables):

```yaml
secrets:
  anthropic-api-key:
    env: ANTHROPIC_API_KEY
  openai-api-key:
    env: OPENAI_API_KEY
  custom-key:
    env: MY_CUSTOM_KEY
```

Use in code with `Secret.from_name()`:

```python
from cua_bench import Secret

@benchmark.function(
    secrets=[Secret.from_name("anthropic-api-key")],
)
async def run_task(task_index: int, env) -> dict:
    import os
    api_key = os.environ["ANTHROPIC_API_KEY"]
```

## agents.yaml

Define custom agents:

```yaml
agents:
  my-agent:
    image: my-registry/my-agent:latest
    model: anthropic/claude-sonnet-4-20250514
    max_steps: 50

  cua-agent:
    image: trycua/cua-agent:latest
    model: anthropic/claude-sonnet-4-20250514
```

Use with `--agent`:

```bash
cb run dataset datasets/cua-bench-basic --agent my-agent
```

## Environment Variables

| Variable | Description |
|----------|-------------|
| `ANTHROPIC_API_KEY` | Anthropic API key for Claude models |
| `OPENAI_API_KEY` | OpenAI API key for GPT models |
| `CUA_CLOUD_TOKEN` | Cua Cloud authentication token |
| `CUA_CONFIG_PATH` | Custom config directory (default: `.cua/`) |

## Image Registry

Images are stored in `~/.local/state/cua-bench/images.json`:

```json
{
  "version": 1,
  "images": {
    "linux-docker": {
      "platform": "linux-docker",
      "docker_image": "trycua/cua-xfce:latest",
      "status": "ready"
    },
    "windows-qemu": {
      "platform": "windows-qemu",
      "path": "~/.local/state/cua-bench/images/windows-qemu",
      "config": {
        "memory": "8G",
        "cpus": 4
      },
      "status": "ready"
    }
  }
}
```

## Authentication

For Cua Cloud access:

```bash
# Browser-based login
cb login

# Verify authentication
cb status
```
