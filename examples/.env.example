# TradingView AI Trading Agent Configuration
# Copy this file to .env and fill in your actual credentials

# ============================================================================
# ANTHROPIC API (Required for AI Vision)
# ============================================================================
# Get your API key at: https://console.anthropic.com
ANTHROPIC_API_KEY=sk-ant-api03-...your-key-here...

# ============================================================================
# ALPACA TRADING API (Required for Order Execution)
# ============================================================================
# Get free paper trading account at: https://alpaca.markets

# Paper Trading (for testing - recommended to start here)
ALPACA_API_KEY=PK...your-paper-key-here...
ALPACA_SECRET_KEY=...your-paper-secret-here...
ALPACA_BASE_URL=https://paper-api.alpaca.markets

# Live Trading (use only after extensive testing)
# ALPACA_API_KEY=AK...your-live-key-here...
# ALPACA_SECRET_KEY=...your-live-secret-here...
# ALPACA_BASE_URL=https://api.alpaca.markets

# ============================================================================
# TRADING CONFIGURATION
# ============================================================================

# Portfolio Settings
PORTFOLIO_VALUE=100000          # Initial portfolio value (paper trading default)
STARTING_CASH=100000            # Starting cash balance

# Risk Management
MAX_POSITION_SIZE=0.10          # Maximum 10% of portfolio per position
MAX_DAILY_LOSS=0.02             # Stop trading at 2% daily loss
MAX_DRAWDOWN=0.10               # Maximum 10% drawdown allowed
MAX_POSITIONS=10                # Maximum concurrent positions
REQUIRE_STOP_LOSS=true          # Require stop-loss on all trades

# Trading Strategy
DEFAULT_STRATEGY=trend_following  # trend_following, breakout, or custom
RISK_PER_TRADE=0.01             # Risk 1% of portfolio per trade
REWARD_RISK_RATIO=2.0           # Target 2:1 reward/risk

# Scanning Settings
SCAN_INTERVAL=300               # Scan watchlist every 5 minutes (seconds)
DEFAULT_TIMEFRAME=1D            # Default chart timeframe (1D, 4H, 1H, etc.)

# Watchlist (comma-separated symbols)
WATCHLIST=AAPL,MSFT,GOOGL,NVDA,TSLA,AMD,AMZN,META,NFLX,SPY

# ============================================================================
# AI MODEL CONFIGURATION
# ============================================================================

# Primary model for vision and decision making
PRIMARY_MODEL=anthropic/claude-sonnet-4-5

# Fast model for simple decisions (optional)
FAST_MODEL=anthropic/claude-haiku-4-5

# Vision settings
MAX_RECENT_IMAGES=5             # Keep last N screenshots in context
USE_PROMPT_CACHING=true         # Enable prompt caching to reduce costs

# Budget limits
MAX_DAILY_API_BUDGET=20.0       # Maximum $20/day on API calls
MAX_MONTHLY_API_BUDGET=500.0    # Maximum $500/month

# ============================================================================
# SAFETY & COMPLIANCE
# ============================================================================

# Kill Switch Settings
ENABLE_KILL_SWITCH=true         # Enable automatic kill switch
MAX_LOSING_STREAK=5             # Halt trading after 5 consecutive losses
EMERGENCY_STOP_LOSS_PCT=0.05    # Emergency stop if position loses 5%

# Compliance (US markets)
PATTERN_DAY_TRADER_CHECK=true   # Check PDT rule (4+ day trades in 5 days)
WASH_SALE_CHECK=true            # Check for wash sale violations
ACCOUNT_MINIMUM=25000           # Minimum for day trading (US regulation)

# Audit Trail
SAVE_SCREENSHOTS=true           # Save chart screenshots for all decisions
SAVE_REASONING=true             # Log AI reasoning for audit
AUDIT_LOG_DIR=./trading_audit_tv

# ============================================================================
# OPTIONAL: OTHER BROKER APIS
# ============================================================================

# Interactive Brokers (IBKR)
# IBKR_HOST=127.0.0.1
# IBKR_PORT=7497                # 7497 for live, 7496 for paper
# IBKR_CLIENT_ID=1

# TD Ameritrade
# TD_API_KEY=...
# TD_REDIRECT_URI=https://localhost

# ============================================================================
# MARKET DATA (Optional - Alpaca provides free data)
# ============================================================================

# Polygon.io (premium data)
# POLYGON_API_KEY=...

# Alpha Vantage (free tier available)
# ALPHAVANTAGE_API_KEY=...

# ============================================================================
# MONITORING & ALERTS (Optional)
# ============================================================================

# Email alerts (via SMTP)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# ALERT_EMAIL=your-email@gmail.com

# Telegram alerts
# TELEGRAM_BOT_TOKEN=...
# TELEGRAM_CHAT_ID=...

# Discord webhook
# DISCORD_WEBHOOK_URL=...

# ============================================================================
# ADVANCED SETTINGS
# ============================================================================

# Logging
LOG_LEVEL=INFO                  # DEBUG, INFO, WARNING, ERROR
LOG_FILE=./trading_agent.log

# Performance
PARALLEL_ANALYSIS=false         # Analyze multiple symbols in parallel (costs more)
CACHE_INDICATORS=true           # Cache technical indicator calculations

# Development
DEBUG_MODE=false                # Enable debug mode (more verbose logging)
DRY_RUN=false                   # Simulate trades without execution (paper trading is safer)

# ============================================================================
# NOTES
# ============================================================================
#
# 1. START WITH PAPER TRADING: Test for at least 2 weeks before considering live
# 2. USE SMALL CAPITAL: When going live, start with $1,000-$5,000 maximum
# 3. MONITOR CLOSELY: Watch the agent's decisions especially in first few days
# 4. REVIEW AUDIT LOGS: Check decision logs daily to understand agent behavior
# 5. ADJUST RISK SETTINGS: Tune risk parameters based on your risk tolerance
#
# Security:
# - Never commit .env file to git (it's in .gitignore)
# - Keep API keys secure and never share them
# - Rotate keys regularly
# - Use paper trading keys for development
#
# Support:
# - Documentation: See TRADINGVIEW_SETUP.md
# - GitHub: https://github.com/trycua/cua/issues
# - Discord: https://discord.com/invite/mVnXXpdE85
